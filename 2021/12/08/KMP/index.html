<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>KMP | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="KMP1.BF算法的缺点与KMP的思路BF算法先制定规则，一个文本串S和一个模式串P，想要查找P在S中的位置，同时有两个变量i和j。i控制S串中匹配到的位置，j控制在P串中匹配到的位置，如果j移动到P串的末尾且匹配成功，那么可以返回i-j表示P串在S串中的位置，如果j未能移动到P串的末尾，说明匹配失败，回溯i的位置到i-(j-1)，也就是刚开始匹配的下一个位置的地方，继续开始匹配，整个思路就是暴力">
<meta property="og:type" content="article">
<meta property="og:title" content="KMP">
<meta property="og:url" content="http://example.com/2021/12/08/KMP/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="KMP1.BF算法的缺点与KMP的思路BF算法先制定规则，一个文本串S和一个模式串P，想要查找P在S中的位置，同时有两个变量i和j。i控制S串中匹配到的位置，j控制在P串中匹配到的位置，如果j移动到P串的末尾且匹配成功，那么可以返回i-j表示P串在S串中的位置，如果j未能移动到P串的末尾，说明匹配失败，回溯i的位置到i-(j-1)，也就是刚开始匹配的下一个位置的地方，继续开始匹配，整个思路就是暴力">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-12-08T11:45:26.000Z">
<meta property="article:modified_time" content="2021-12-08T12:50:30.763Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-KMP" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/12/08/KMP/" class="article-date">
  <time class="dt-published" datetime="2021-12-08T11:45:26.000Z" itemprop="datePublished">2021-12-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      KMP
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h1><h2 id="1-BF算法的缺点与KMP的思路"><a href="#1-BF算法的缺点与KMP的思路" class="headerlink" title="1.BF算法的缺点与KMP的思路"></a>1.BF算法的缺点与KMP的思路</h2><h3 id="BF算法"><a href="#BF算法" class="headerlink" title="BF算法"></a>BF算法</h3><p>先制定规则，一个文本串S和一个模式串P，想要查找P在S中的位置，同时有两个变量i和j。i控制S串中匹配到的位置，j控制在P串中匹配到的位置，如果j移动到P串的末尾且匹配成功，那么可以返回i-j表示P串在S串中的位置，如果j未能移动到P串的末尾，说明匹配失败，回溯i的位置到i-(j-1)，也就是刚开始匹配的下一个位置的地方，继续开始匹配，整个思路就是暴力匹配，因为移动的是文本串i变量，且每次只移动1，效率自然低下，然后KMP算法就诞生了</p>
<h3 id="KMP算法"><a href="#KMP算法" class="headerlink" title="KMP算法"></a>KMP算法</h3><p>既然每次i只能移动一格，而模式串事实上已经移动了许多了，可以换一个思路，每次移动的其实是模式串，也就是i是一直往前走的，由于本博客没人访问且KMP是我目前遇到的最难的算法之一，想写的让当初那个什么都不懂的我看懂KMP，实在是超出了我的能力范围，所以本博客就是一个记录和回忆的过程，具体可以在互联网上寻找资源，关于KMP会有很多插图辅助理解，且有着严密的逻辑。</p>
<h2 id="2-理解next数组使模式串p跳转匹配"><a href="#2-理解next数组使模式串p跳转匹配" class="headerlink" title="2.理解next数组使模式串p跳转匹配"></a>2.理解next数组使模式串p跳转匹配</h2><p>对于一个文本串abcdab abcdabcdabde来说，给与一个模式串abcdabd，当abcdabd匹配abcdab_时，就匹配失败，但此时不必将文本串回溯到第二个字符的位置，对于此种情况来说，前缀的ab和后缀的ab相同，如果实现将前面的ab移动到后面的ab位置，然后继续进行匹配，就省去了i回溯的时间，事实上是大量节省，而我口中所谓的移动前缀的ab到后缀的ab这个过程，就是next数组所起的作用。next数组里的值，表示当前字符之前的字符串，最长的前后缀字符串相等的情况，此时若将j = next[k]——k为模式串的移动，j为模式串移动的起始位置，此时前后缀相等的个数为2，也就实现了从ab_abcdabcdabde开始匹配，省去了回溯的时间的同时，也节省了不必要的匹配步骤</p>
<h3 id="next数组的求解"><a href="#next数组的求解" class="headerlink" title="next数组的求解"></a>next数组的求解</h3><p>既然next数组这么好用，如何求解next数组内的每一个值呢？还是那句话，本博客没人看，或许当我大二的时候我会回头认真写一遍，但目前来说，网络上的资源要好的多，且next数组的求解涉及递归，众所周知，递归就不是小白可以想出来的解题方法，我也是看了好多文章才勉强解决了这个递归问题，这里就直接贴源码</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//利用递归求导next数组的值</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetNext</span><span class="params">(<span class="keyword">char</span>* p, <span class="keyword">int</span> next[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> j, k,pLen;</span><br><span class="line">	j = <span class="number">0</span>;</span><br><span class="line">	k = <span class="number">-1</span>;</span><br><span class="line">	pLen = <span class="built_in">strlen</span>(p);</span><br><span class="line">	<span class="keyword">while</span> (j &lt; pLen - <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (k == <span class="number">-1</span> || p[j] == p[k])</span><br><span class="line">		&#123;</span><br><span class="line">			k++;</span><br><span class="line">			j++;</span><br><span class="line">			next[j] = k;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			k = next[k];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="next数组的优化"><a href="#next数组的优化" class="headerlink" title="next数组的优化"></a>next数组的优化</h3><p>当然next数组还是存在一个优化，我觉得要理解这个优化就要理解如果next数组里的值是-1意味着什么。我也说不明白，这个算法就先这样，我算是大概理解了他的一个逻辑和好处了，优化的过程中最好不要出现p[j] = p[ next[j] ]。为什么呢？理由是：当p[j] != s[i] 时，下次匹配必然是p[ next [j]] 跟s[i]匹配，如果p[j] = p[ next[j] ]，必然导致后一步匹配失败（因为p[j]已经跟s[i]失配，然后你还用跟p[j]等同的值p[next[j]]去跟s[i]匹配，很显然，必然失配），所以不能允许p[j] = p[ next[j ]]。如果出现了p[j] = p[ next[j] ]咋办呢？如果出现了，则需要再次递归，即令next[j] = next[ next[j] ]。我抄的，原因是这个足够困难，至少我描述不出来，嘻嘻<br>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/v_JULY_v/article/details/7041827">https://blog.csdn.net/v_JULY_v/article/details/7041827</a></p>
<h2 id="接下来怎么做？"><a href="#接下来怎么做？" class="headerlink" title="接下来怎么做？"></a>接下来怎么做？</h2><p>接下来我想学习树，KMP算法很强大，对于目前的我来说也仅限于理解罢了，表达都表达不清，但就像我当初理解链表，谁能想到我真正理解链表其实是我真正理解指针的时候，而我真正理解指针其实是我真正数组的时候，我真正理解数组其实是我真正理解结构体的时候，我真正理解结构体的时候。。。。。看似上面的理解顺序毫无逻辑，甚至还有些滑稽，但我想表述的是学习并不一定是一个线性过程，其他知识的积累反过来也可以补充目前你所不理解的地方。无论怎样，我要学树了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/12/08/KMP/" data-id="ckwxj4ydp0000tctq1lq3emhx" data-title="KMP" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2021/11/26/DFS-and-BFS/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">DFS_and_BFS</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/12/08/KMP/">KMP</a>
          </li>
        
          <li>
            <a href="/2021/11/26/DFS-and-BFS/">DFS_and_BFS</a>
          </li>
        
          <li>
            <a href="/2021/11/24/exercise/">exercise</a>
          </li>
        
          <li>
            <a href="/2021/11/17/studentSystem/">studentSystem</a>
          </li>
        
          <li>
            <a href="/2021/11/11/LinkNode/">LinkNode</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>